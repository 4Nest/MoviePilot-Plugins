# Bilibili番剧更新通知插件

## 功能说明

这是一个MoviePilot插件，用于监控Bilibili番剧更新。插件将更新检查分为两个独立的任务：
1. 当天更新检查：每天检查并汇总通知当天所有更新的番剧
2. 新上架检查：检查并通知包含"第1话"关键词的新番剧上架信息

## 使用说明

1. 在MoviePilot插件市场中找到并安装"Bilibili番剧更新通知"插件
2. 启用插件
3. 选择要监控的类型（番剧、电影、国创）
4. 设置当天更新检查周期（cron表达式）
5. 设置新上架检查周期（cron表达式）
6. 选择是否发送通知
7. 可选择立即运行一次检查
8. 可选择清空历史记录

## 配置项说明

- **启用插件**：开启或关闭插件功能
- **发送通知**：是否在检测到更新时发送通知
- **立即运行一次**：插件启动后立即执行一次检查
- **清空历史记录**：清空已通知过的剧集ID记录
- **当天更新检查周期**：设置检查当天更新的时间周期，使用cron表达式格式
- **新上架检查周期**：设置检查新上架番剧的时间周期，使用cron表达式格式
- **类型**：选择要监控的类型，支持番剧、电影、国创

## 工作原理

插件会定期调用Bilibili的API接口获取番剧更新信息：
- API地址：https://api.bilibili.com/pgc/web/timeline
- 该接口返回未来7天的番剧更新时间表

插件会分别执行两种检查：

1. 当天更新检查：
   - 检查今天更新的所有番剧
   - 将所有当天更新的番剧信息汇总成一条通知发送

2. 新上架检查：
   - 检查今天及未来日期的更新
   - 当检测到包含"第1话"关键词的更新时，认为是新番剧上架，并发送通知
   - 记录已通知过的剧集ID，避免重复通知

通知内容包括：
- 番剧封面（新上架通知）
- 剧集ID（新上架通知）
- 更新集数（新上架通知）
- 更新时间（新上架通知）
- 番剧标题
- 直达链接（新上架通知）
- 当天更新的番剧列表（当天更新通知）

## 注意事项

1. 插件会记录已通知过的剧集ID，避免重复通知
2. 通知功能需要MoviePilot的通知服务已正确配置
3. 插件默认当天更新检查周期为每天9点执行一次
4. 插件默认新上架检查周期为每天10点执行一次
5. 插件只会检查今天及未来日期的更新，不会检查历史更新
